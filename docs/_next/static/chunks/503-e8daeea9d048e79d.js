"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[503],{4503:function(a,b,c){c.d(b,{dp:function(){return j},xC:function(){return l}});var d=c(2248),e=c(7294),f=c(9477),g=c(6364);let h,i=function(a,b){return void 0===b&&(b=d.YQ.NORMAL),(0,e.forwardRef)(function(c,d){let{blendFunction:f,opacity:h,...i}=c,j=(0,g.w)(a=>a.invalidate),k=(0,e.useMemo)(()=>new a(i),[i]);return(0,e.useLayoutEffect)(()=>{k.blendMode.blendFunction=f||0===f?f:b,void 0!==h&&(k.blendMode.opacity.value=h),j()},[f,k.blendMode,h]),e.createElement("primitive",{ref:d,object:k,dispose:null})})},j=i(d.rk,d.YQ.ADD);i(d.at),i(d.zo),i(d.AL);let k=(0,e.createContext)(null),l=e.memo((0,e.forwardRef)((a,b)=>{let{children:c,camera:i,scene:j,resolutionScale:l,enabled:m=!0,renderPriority:n=1,autoClear:o=!0,depthBuffer:p,disableNormalPass:q,stencilBuffer:r,multisampling:s=8,frameBufferType:t=f.HalfFloatType}=a,{gl:u,scene:v,camera:w,size:x}=(0,g.w)();j=j||v,i=i||w;let[y,z,A]=(0,e.useMemo)(()=>{let a=function(){if(void 0!==h)return h;try{var a;let b,c=document.createElement("canvas");return h=!!(window.WebGL2RenderingContext&&(b=c.getContext("webgl2"))),b&&(null===(a=b.getExtension("WEBGL_lose_context"))|| void 0===a||a.loseContext()),h}catch(d){return h=!1}}(),b=new d.xC(u,{depthBuffer:p,stencilBuffer:r,multisampling:s>0&&a?s:0,frameBufferType:t});b.addPass(new d.CD(j,i));let c=null,e=null;return!q&&((e=new d.gh(j,i)).enabled=!1,b.addPass(e),void 0!==l&&a&&((c=new d.xs({normalBuffer:e.texture,resolutionScale:l})).enabled=!1,b.addPass(c))),[b,e,c]},[i,u,p,r,s,t,j,q,l]);(0,e.useEffect)(()=>null==y?void 0:y.setSize(x.width,x.height),[y,x]),(0,g.x)((a,b)=>{m&&(u.autoClear=o,y.render(b))},m?n:0);let B=(0,e.useRef)(null);(0,e.useLayoutEffect)(()=>{let a;return B.current&&B.current.__r3f&&y&&((a=new d.H5(i,...B.current.__r3f.objects)).renderToScreen=!0,y.addPass(a),z&&(z.enabled=!0),A&&(A.enabled=!0)),()=>{a&&(null==y||y.removePass(a)),z&&(z.enabled=!1),A&&(A.enabled=!1)}},[y,c,i,z,A]);let C=(0,e.useMemo)(()=>({composer:y,normalPass:z,downSamplingPass:A,resolutionScale:l,camera:i,scene:j}),[y,z,A,l,i,j]);return(0,e.useImperativeHandle)(b,()=>y,[y]),e.createElement(k.Provider,{value:C},e.createElement("group",{ref:B},c))}));i(d.ol),i(d.JL),i(d.xV,d.YQ.COLOR_DODGE),i(d.p$,d.YQ.OVERLAY),i(d.wL),i(d.M4),i(d.Dd),i(d.Uy)}}])